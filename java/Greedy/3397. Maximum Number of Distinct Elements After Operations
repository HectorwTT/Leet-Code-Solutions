class Solution {
    public int maxDistinctElements(int[] nums, int k) {
     int [] nums1=new int[nums.length];
     HashMap<Integer,Integer> map=new HashMap<>();
     Arrays.sort(nums);
     nums1[0]=nums[0]-k;
     map.put(nums1[0],1);
     int lastUsed=nums1[0];
     for(int i=1;i<nums1.length;i++){
      int smallest=nums[i]-k;  
      int largest=nums[i]+k;
      if(lastUsed<smallest) nums1[i]=smallest;
      else if(lastUsed>=smallest &&  lastUsed<largest )nums1[i]=lastUsed+1;
      else nums1[i]=lastUsed;
      lastUsed=nums1[i];
      if(!map.containsKey(nums1[i]))map.put(nums1[i],1);  
     }
     return map.size(); 
    }
}
