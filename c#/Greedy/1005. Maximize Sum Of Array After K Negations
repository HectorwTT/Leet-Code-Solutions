public class Solution {
    public int LargestSumAfterKNegations(int[] nums, int k) {
        int score=0;
        Array.Sort(nums);
        int index=0;
        int count=0;
        while(count !=k){
         nums[index]= -1*nums[index];
         if(index+1 < nums.Length && nums[index+1]<=0 )index++;
         else{
            if(index+1==nums.Length)break;
            int next= nums[index+1];
            int current= nums[index];
            if(index<nums.Length && current>0 && next>0 && next<current)index++;
         }
         count++;
         if(k>nums.Length){
             Array.Sort(nums);
             index=0;
         }
        }
        for(int i=0;i<nums.Length;i++){
         score+=nums[i];
        }        
        return score;  
    }
}
